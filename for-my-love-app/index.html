<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>For My Love</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36'><text x='52%' y='60%' font-size='34' text-anchor='middle' dominant-baseline='middle'>‚ù§Ô∏è</text></svg>">
  <link rel="apple-touch-icon" sizes="180x180" href="./apple-heart-180.png">


  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#ff6b81">

  <style>
    :root {
      --primary: #ff6b81;
      --accent: #ffe9ec;
      --background: linear-gradient(135deg, #fff5f8, #ffe9ec);
      --text: #3a3a3a;
      --shadow: rgba(0, 0, 0, 0.08);
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
      background: var(--background);
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      background: white;
      padding: 2rem;
      border-radius: 1.25rem;
      box-shadow: 0 10px 20px var(--shadow);
      max-width: 600px;
      width: 100%;
      text-align: center;
      position: relative;
    }

    h1 {
      margin-top: 0;
      font-size: 2rem;
      color: var(--primary);
    }

    .quote {
      font-style: italic;
      font-size: 1.2rem;
      margin: 2rem 0;
      color: #555;
    }

    .nickname {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--primary);
    }

    .reset-button {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 107, 129, 0.1);
      border: none;
      color: var(--primary);
      padding: 0.4rem 0.9rem;
      border-radius: 0.75rem;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
      backdrop-filter: blur(4px);
    }
        .reset-button:hover {
          background: rgba(255, 107, 129, 0.2);
          color: #d43d56;
          box-shadow: 0 2px 6px rgba(255, 107, 129, 0.3);
        }

    .notif-button {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: rgba(255, 107, 129, 0.1);
      border: none;
      color: var(--primary);
      padding: 0.4rem 0.9rem;
      border-radius: 0.75rem;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
      backdrop-filter: blur(4px);
    }
        .notif-button:hover {
          background: rgba(255, 107, 129, 0.2);
          color: #d43d56;
          box-shadow: 0 2px 6px rgba(255, 107, 129, 0.3);
        }

    @media (max-width: 480px) {
      .container {
        padding: 1.5rem;
        border-radius: 1rem;
      }

      .main-title {
        margin-top: 30px;
      }

      .quote {
        font-size: 1rem;
      }

      .nickname {
        font-size: 1.3rem;
      }

      .reset-button {
        padding: 0.3rem 0.7rem;
        font-size: 0.75rem;
      }

      .notif-button {
        padding: 0.3rem 0.7rem;
        font-size: 0.75rem;
      }
    }
  </style>
</head>
<body>
<div class="container">
    <button class="notif-button" id="enable-push" style="left:1rem;">Enable Push üîî</button>
    <button class="reset-button" onclick="resetCounter()">Get Another üíï</button>
    <h1 class="main-title">Dagens Citat</h1>
    <br>
    <div class="nickname" id="nickname">N/A</div>
    <div class="quote" id="quote">Loading...</div>
    <div id="emoji-of-the-day" style="font-size: 2em; margin-top: 1em;"></div>
  </div>

<script>
    // bump this whenever you deploy code changes
    const APP_VERSION = '25.8.1.1';
    const prev = localStorage.getItem('app-version');
    if (prev !== APP_VERSION) {
      localStorage.setItem('app-version', APP_VERSION);
      // Bust any cached bfcache instance and reload fresh
      location.replace(location.pathname + location.search + (location.search ? '&' : '?') + 'v=' + APP_VERSION);
    }
</script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js', { scope: './' })
          .then(r => console.log('SW registered with scope:', r.scope))
          .catch(console.error);
      }
    });
</script>

<script>
        const VERCEL_BACKEND = 'https://for-my-love-app.vercel.app';
        const PUBLIC_VAPID_KEY = 'BOsuQtHamndZH8ZUivuNCyZhoiBzx_n7SGbf0wwm0yIxQi0tTnk1Idb4Du9qDOgFeiRKD_-ZROf8iIchAUNJy5E';

        function isIOS(){ return /iphone|ipad|ipod/i.test(navigator.userAgent); }
        function isStandalone(){ return window.matchMedia?.('(display-mode: standalone)').matches || window.navigator.standalone; }
        function urlBase64ToUint8Array(s){const p='='.repeat((4-s.length%4)%4);const b=(s+p).replace(/-/g,'+').replace(/_/g,'/');const r=atob(b),a=new Uint8Array(r.length);for(let i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return a;}

        async function enablePushVerbose() {
          try {
            if (!('serviceWorker' in navigator)) throw new Error('ServiceWorker not supported');
            if (isIOS() && !isStandalone()) throw new Error('Install to Home Screen first');

            // Confirm the file exists (quick network sanity check)
            const probe = await fetch('./sw.js', { cache: 'no-store' });
            console.log('sw.js status:', probe.status, probe.url);
            if (!probe.ok) throw new Error('sw.js not reachable (' + probe.status + ')');

            // Register + ensure activated
            const reg = await navigator.serviceWorker.register('./sw.js');
            await navigator.serviceWorker.ready;
            await reg.update(); // pull fresh code if cached

            // Ask permission
            const perm = await Notification.requestPermission();
            if (perm !== 'granted') throw new Error('Permission not granted');

            // VAPID key sanity check (should be 65 bytes)
            const keyBytes = urlBase64ToUint8Array(PUBLIC_VAPID_KEY);
            console.log('VAPID key length:', keyBytes.length);
            if (keyBytes.length < 65) throw new Error('Bad VAPID public key');

            // Subscribe
            const sub = await reg.pushManager.subscribe({
              userVisibleOnly: true,
              applicationServerKey: keyBytes
            });
            console.log('Subscribed endpoint:', sub.endpoint);

            // Send to backend
            const resp = await fetch(`${VERCEL_BACKEND}/api/subscribe`, {
              method: 'POST', headers: { 'Content-Type':'application/json' },
              body: JSON.stringify(sub)
            });
            console.log('subscribe status:', resp.status);
            if (!resp.ok) throw new Error('Subscribe API failed: ' + resp.status);

            alert('Push enabled üéâ');
          } catch (err) {
            console.error('enablePush failed:', err, err?.name, err?.message);
            alert('Push failed: ' + (err?.message || err));
          }
        }
        document.getElementById('enable-push').addEventListener('click', enablePushVerbose);
</script>
  
  <script>
    const quotes = [
        "Let yourself be silently drawn by the strange pull of what you really love. It will not lead you astray. ‚Äì Rumi",
        "Be a rainbow in someone else's cloud. ‚Äì Maya Angelou",
        "The best gift you can give to others is your presence. The best gift you can give to yourself is perseverance. ‚Äì Maxime Lagac√©",
        "For every minute you are angry you lose sixty seconds of happiness. ‚Äì Ralph Waldo Emerson",
        "Out of clutter, find simplicity. From discord, find harmony. In the middle of difficulty lies opportunity. ‚Äì Albert Einstein",
        "We must be our own before we can be another's. ‚Äì Ralph Waldo Emerson",
        "To love and be loved is to feel the sun from both sides. ‚Äì David Viscott",
        "The most precious gift we can offer anyone is our attention. ‚Äì Thich Nhat Hanh",
        "Only from the heart can you touch the sky. ‚Äì Rumi",
        "Love does not consist in gazing at each other, but in looking outward together in the same direction. ‚Äì Antoine de Saint-Exup√©ry",
        "You don‚Äôt love someone for their looks, or their clothes, or for their fancy car, but because they sing a song only you can hear. ‚Äì Oscar Wilde",
        "At the touch of love, everyone becomes a poet. ‚Äì Plato",
        "There is no charm equal to tenderness of heart. ‚Äì Jane Austen",
        "To be fully seen by somebody, then, and be loved anyhow‚Äîthis is a human offering that can border on miraculous. ‚Äì Elizabeth Gilbert",
        "Love recognizes no barriers. It jumps hurdles, leaps fences, penetrates walls to arrive at its destination full of hope. ‚Äì Maya Angelou",
        "The heart has its reasons of which reason knows nothing. ‚Äì Blaise Pascal",
        "The giving of love is an education in itself. ‚Äì Eleanor Roosevelt",
        "The minute I heard my first love story, I started looking for you. ‚Äì Rumi",
        "Love is a canvas furnished by Nature and embroidered by imagination. ‚Äì Voltaire",
        "Being deeply loved by someone gives you strength, while loving someone deeply gives you courage. ‚Äì Lao Tzu",
        "The more one judges, the less one loves. ‚Äì Honor√© de Balzac",
        "You are my today and all of my tomorrows. ‚Äì Leo Christopher",
        "True love is eternal, infinite, and always like itself. ‚Äì Honor√© de Balzac",
        "You yourself, as much as anybody in the entire universe, deserve your love and affection. ‚Äì Buddha",
        "Love and compassion are necessities, not luxuries. Without them, humanity cannot survive. ‚Äì Dalai Lama",
        "The most powerful weapon on earth is the human soul on fire. ‚Äì Ferdinand Foch",
        "Love doesn't make the world go 'round. Love is what makes the ride worthwhile. ‚Äì Franklin P. Jones",
        "The best and most beautiful things in this world cannot be seen or even heard, but must be felt with the heart. ‚Äì Helen Keller",
        "To love is nothing. To be loved is something. But to love and be loved, that‚Äôs everything. ‚Äì T. Tolis",
        "There is always some madness in love. But there is also always some reason in madness. ‚Äì Friedrich Nietzsche",
        "Love is a friendship set to music. ‚Äì Joseph Campbell",
        "You don't love someone because they're perfect. You love them in spite of the fact that they're not. ‚Äì Jodi Picoult",
        "The art of love is largely the art of persistence. ‚Äì Albert Ellis",
        "All you need is love. But a little chocolate now and then doesn‚Äôt hurt. ‚Äì Charles M. Schulz",
        "There is no love without forgiveness, and there is no forgiveness without love. ‚Äì Bryant H. McGill",
        "A dull mind gets bored easily. A curious mind expands forever. ‚Äì Unknown",
        "Love yourself. Love the world. There is no power stronger than love. ‚Äì Unknown",
        "The only person you are destined to become is the person you decide to be. ‚Äì Ralph Waldo Emerson",
        "Do not go where the path may lead, go instead where there is no path and leave a trail. ‚Äì Ralph Waldo Emerson",
        "You need to have faith in yourself. Be brave and take risks. You don't have to have it all figured out to move forward. ‚Äì Roy T. Bennett",
        "What you're supposed to do when you don't like a thing is change it. If you can't change it, change the way you think about it. ‚Äì Maya Angelou",
        "I am different. Not less. ‚Äì Temple Grandin",
        "Be happy for this moment. This moment is your life. ‚Äì Omar Khayyam",
        "If you always do what you've always done, you'll always get what you've always got. ‚Äì Henry Ford",
        "The difference in winning and losing is most often... not quitting. ‚Äì Walt Disney",
        "When we are no longer able to change a situation, we are challenged to change ourselves. ‚Äì Viktor Frankl",
        "Appreciation is a wonderful thing: It makes what is excellent in others belong to us as well. ‚Äì Voltaire",
        "Our business in life is not to get ahead of others, but to get ahead of ourselves. ‚Äì Thomas Carlyle",
        "Be stronger than your strongest excuse. ‚Äì Unknown",
        "Every noble work is at first impossible. ‚Äì Thomas Carlyle",
        "Every day may not be good, but there is some good in every day. ‚Äì Alice Morse Earle",
        "Success is failing nine times and getting up ten. ‚Äì Jon Bon Jovi",
        "Don't let somebody who gave up on their dreams talk you out of yours. ‚Äì Unknown",
        "Even if you stumble, you're still moving forward. ‚Äì Vernon Howard",
        "Whether you think you can, or think you can't. You're right. ‚Äì Henry Ford",
        "The only way of discovering the limits of the possible is to venture a little way past them into the impossible. ‚Äì Arthur C. Clarke",
        "Do not ruin today with mourning tomorrow. ‚Äì Catherynne M. Valente",
        "There's a crack in everything. That's how the light gets in. ‚Äì Leonard Cohen",
        "It's only when you're able to let go that you truly have a choice. ‚Äì Deepak Chopra",
        "Happiness is not something ready made. It comes from your own actions. ‚Äì Dalai Lama",
        "Act as if what you do makes a difference. It does. ‚Äì William James",
        "Don‚Äôt wait. The time will never be just right. ‚Äì Napoleon Hill",
        "Success is not final, failure is not fatal: It is the courage to continue that counts. ‚Äì Winston Churchill",
        "Believe you can and you're halfway there. ‚Äì Theodore Roosevelt",
        "Courage doesn't always roar. Sometimes courage is the quiet voice at the end of the day saying, ‚ÄòI will try again tomorrow.‚Äô ‚Äì Mary Anne Radmacher",
        "The mind is everything. What you think you become. ‚Äì Buddha",
        "Life shrinks or expands in proportion to one's courage. ‚Äì Ana√Øs Nin",
        "It does not matter how slowly you go as long as you do not stop. ‚Äì Confucius",
        "If you‚Äôre going through hell, keep going. ‚Äì Winston Churchill",
        "Fall seven times, stand up eight. ‚Äì Japanese Proverb",
        "Everything you‚Äôve ever wanted is on the other side of fear. ‚Äì George Addair",
        "Start where you are. Use what you have. Do what you can. ‚Äì Arthur Ashe",
        "Keep your face always toward the sunshine‚Äîand shadows will fall behind you. ‚Äì Walt Whitman",
        "It always seems impossible until it‚Äôs done. ‚Äì Nelson Mandela",
        "You miss 100% of the shots you don‚Äôt take. ‚Äì Wayne Gretzky",
        "Try to be a rainbow in someone's cloud. ‚Äì Maya Angelou",
        "There are no shortcuts to any place worth going. ‚Äì Beverly Sills",
        "Don‚Äôt count the days, make the days count. ‚Äì Muhammad Ali",
        "You are never too old to set another goal or to dream a new dream. ‚Äì C.S. Lewis",
        "Nothing will work unless you do. ‚Äì Maya Angelou",
        "It is never too late to be what you might have been. ‚Äì George Eliot",
        "What lies behind us and what lies before us are tiny matters compared to what lies within us. ‚Äì Ralph Waldo Emerson",
        "You must do the things you think you cannot do. ‚Äì Eleanor Roosevelt",
        "You must be the change you wish to see in the world. ‚Äì Mahatma Gandhi",
        "The only journey is the one within. ‚Äì Rainer Maria Rilke",
        "He who is not courageous enough to take risks will accomplish nothing in life. ‚Äì Muhammad Ali",
        "To handle yourself, use your head; to handle others, use your heart. ‚Äì Eleanor Roosevelt",
        "You are never too small to make a difference. ‚Äì Greta Thunberg",
        "Don‚Äôt let the noise of others‚Äô opinions drown out your own inner voice. ‚Äì Steve Jobs",
        "I am not afraid of storms for I am learning how to sail my ship. ‚Äì Louisa May Alcott",
        "What lies behind us and what lies before us are tiny matters compared to what lies within us. ‚Äì Ralph Waldo Emerson",
        "Your time is limited, so don‚Äôt waste it living someone else‚Äôs life. ‚Äì Steve Jobs",
        "Everything has beauty, but not everyone sees it. ‚Äì Confucius",
        "Life is really simple, but we insist on making it complicated. ‚Äì Confucius",
        "It is not length of life, but depth of life. ‚Äì Ralph Waldo Emerson",
        "In the middle of difficulty lies opportunity. ‚Äì Albert Einstein",
        "Success is not how high you have climbed, but how you make a positive difference to the world. ‚Äì Roy T. Bennett",
        "If you want to fly, you have to give up the things that weigh you down. ‚Äì Toni Morrison",
        "Go confidently in the direction of your dreams. Live the life you have imagined. ‚Äì Henry David Thoreau",
        "Turn your wounds into wisdom. ‚Äì Oprah Winfrey",
        "Doubt kills more dreams than failure ever will. ‚Äì Suzy Kassem",
        "If you hear a voice within you say ‚Äòyou cannot paint,‚Äô then by all means paint, and that voice will be silenced. ‚Äì Vincent Van Gogh",
        "Great things are not done by impulse, but by a series of small things brought together. ‚Äì Vincent Van Gogh",
        "Success is to be measured not so much by the position that one has reached in life as by the obstacles which he has overcome. ‚Äì Booker T. Washington",
        "The greatest weapon against stress is our ability to choose one thought over another. ‚Äì William James",
        "You don't have to see the whole staircase, just take the first step. ‚Äì Martin Luther King Jr.",
        "It‚Äôs not whether you get knocked down, it‚Äôs whether you get up. ‚Äì Vince Lombardi",
        "Happiness depends upon ourselves. ‚Äì Aristotle",
        "To live is the rarest thing in the world. Most people exist, that is all. ‚Äì Oscar Wilde",
        "Do what you can, with what you have, where you are. ‚Äì Theodore Roosevelt",
        "The future belongs to those who believe in the beauty of their dreams. ‚Äì Eleanor Roosevelt",
        "What you do makes a difference, and you have to decide what kind of difference you want to make. ‚Äì Jane Goodall",
        "Start each day with a positive thought and a grateful heart. ‚Äì Roy T. Bennett",
        "Don‚Äôt compromise yourself. You‚Äôre all you‚Äôve got. ‚Äì Janis Joplin",
        "If opportunity doesn‚Äôt knock, build a door. ‚Äì Milton Berle",
        "Dream big and dare to fail. ‚Äì Norman Vaughan",
        "Sometimes you win, sometimes you learn. ‚Äì John C. Maxwell",
        "Keep going. Everything you need will come to you at the perfect time. ‚Äì Unknown",
        "You are braver than you believe, stronger than you seem, and smarter than you think. ‚Äì A.A. Milne",
        "The most common way people give up their power is by thinking they don‚Äôt have any. ‚Äì Alice Walker",
        "You are the sky. Everything else ‚Äì it‚Äôs just the weather. ‚Äì Pema Ch√∂dr√∂n",
        "It‚Äôs not the load that breaks you down, it‚Äôs the way you carry it. ‚Äì Lou Holtz",
        "You can‚Äôt go back and change the beginning, but you can start where you are and change the ending. ‚Äì C.S. Lewis",
        "Pain is inevitable. Suffering is optional. ‚Äì Haruki Murakami",
        "You cannot swim for new horizons until you have courage to lose sight of the shore. ‚Äì William Faulkner",
        "Live as if you were to die tomorrow. Learn as if you were to live forever. ‚Äì Mahatma Gandhi",
        "Action is the foundational key to all success. ‚Äì Pablo Picasso",
        "When you arise in the morning, think of what a precious privilege it is to be alive. ‚Äì Marcus Aurelius",
        "If you don‚Äôt like the road you‚Äôre walking, start paving another one. ‚Äì Dolly Parton",
        "Let yourself be silently drawn by the strange pull of what you really love. It will not lead you astray. ‚Äì Rumi",
        "Be fearless in the pursuit of what sets your soul on fire. ‚Äì Jennifer Lee",
        "What is remembered, lives. ‚Äì Old Norse Proverb",
        "The gods help those who help themselves. ‚Äì Old Norse Proverb",
        "It is better to stand and fall than to kneel and live. ‚Äì Volsunga Saga",
        "Look deep into nature, and then you will understand everything better. ‚Äì Albert Einstein",
        "Adopt the pace of nature: her secret is patience. ‚Äì Ralph Waldo Emerson",
        "The earth has music for those who listen. ‚Äì George Santayana",
        "Nature does not hurry, yet everything is accomplished. ‚Äì Lao Tzu",
        "In every walk with nature one receives far more than he seeks. ‚Äì John Muir",
        "To forget how to dig the earth and to tend the soil is to forget ourselves. ‚Äì Mahatma Gandhi",
        "The clearest way into the Universe is through a forest wilderness. ‚Äì John Muir",
        "Wilderness is not a luxury but a necessity of the human spirit. ‚Äì Edward Abbey",
        "We do not inherit the earth from our ancestors, we borrow it from our children. ‚Äì Native American Proverb",
        "Time spent amongst trees is never time wasted. ‚Äì Katrina Mayer",
        "The goal of life is to make your heartbeat match the beat of the universe, to match your nature with Nature. ‚Äì Joseph Campbell",
        "Nature is not a place to visit. It is home. ‚Äì Gary Snyder",
        "A walk in nature walks the soul back home. ‚Äì Mary Davis",
        "Nature teaches more than she preaches. ‚Äì John Muir",
        "Each moment of the year has its own beauty. ‚Äì Ralph Waldo Emerson",
        "Sunsets are proof that no matter what happens, every day can end beautifully. ‚Äì Kristen Butler",
        "If you truly love nature, you will find beauty everywhere. ‚Äì Laura Ingalls Wilder",
        "Live in each season as it passes; breathe the air, drink the drink, taste the fruit. ‚Äì Henry David Thoreau",
        "I am different. Not less. ‚Äì Temple Grandin",
        "There‚Äôs no greater gift than being different and owning it. ‚Äì Dan Harmon",
        "You don‚Äôt outgrow ADHD. You grow into it with strategies, structure, and self-understanding. ‚Äì Dr. Russell Barkley",
        "Creativity is the brain‚Äôs way of having fun. ADHD just turns up the volume. ‚Äì Sari Solden",
        "People with ADHD have kaleidoscope minds. They are beautiful, but hard to follow. ‚Äì Unknown",
        "The same wiring that can make life harder also gives us incredible resilience and insight. ‚Äì Ned Hallowell",
        "Brains like mine are built for bursts, not brakes. ‚Äì Rick Green",
        "I prefer the term ‚Äòmulti-minded‚Äô instead of scatterbrained. ‚Äì Thom Hartmann",
        "Neurodivergent minds are wired for pattern, possibility, and passion. ‚Äì Samantha Craft",
        "You don‚Äôt grow out of it. You grow around it. ‚Äì Jessica McCabe",
        "I see a million angles where others see just one. ‚Äì Anonymous",
        "The same mind that forgets an appointment can write a symphony in the shower. ‚Äì Ned Hallowell",
        "Many of our greatest thinkers had minds that didn‚Äôt fit the mold. ‚Äì Dr. Russell Barkley",
        "Give me a spark, and I‚Äôll give you a wildfire. ‚Äì Unknown",
        "You can't grow flowers without a little disorder in the soil. ‚Äì Unknown",
        "The neurodivergent brain is not broken. It‚Äôs just blazing a different trail. ‚Äì Temple Grandin",
        "My thoughts are stars I cannot fathom into constellations‚Äîbut I see galaxies. ‚Äì John Green",
        "Your brain isn‚Äôt disobedient‚Äîit‚Äôs divergent. ‚Äì Anonymous",
        "When I stopped trying to be normal, I started being brilliant. ‚Äì Unknown",
        "I am not inattentive. I am just attentive to what matters to me. ‚Äì Dr. Gabor Mat√©",
        "You have to embrace your quirks; they are your soul‚Äôs fingerprints. ‚Äì Temple Grandin",
        "Being different is not a curse. It‚Äôs a call to create new things. ‚Äì Thom Hartmann",
        "If you judge a fish by its ability to climb a tree‚Ä¶ ‚Äì Albert Einstein (attributed)",
        "I never made one of my discoveries through the process of rational thinking. ‚Äì Albert Einstein",
        "Don‚Äôt suppress your weird. It‚Äôs where your magic lives. ‚Äì Sari Solden",
        "The ones who are crazy enough to think they can change the world are the ones who do. ‚Äì Steve Jobs",
        "I don't need to be like everyone else. I need to be the best version of me. ‚Äì Thom Hartmann",
        "What seems like chaos to others is often creativity in motion. ‚Äì Dr. Gabor Mat√©",
        "I don‚Äôt need a cure. I need a compass. ‚Äì Kati Morton",
        "Every time I thought I failed, I was actually building resilience. ‚Äì Ned Hallowell",
        "I don't fall behind. I leap sideways. ‚Äì Neurodivergent Quote",
        "It‚Äôs not that I don‚Äôt focus‚Äîit‚Äôs that I focus too much on what excites me. ‚Äì Dr. Russell Barkley",
        "I don't need less energy. I need better direction. ‚Äì Rick Green",
        "The world needs nonlinear thinkers. That‚Äôs how we get breakthroughs. ‚Äì Temple Grandin",
        "ADHD means sometimes forgetting where you put your keys and remembering how stars form in the same breath. ‚Äì Jessica McCabe",
        "Being different isn‚Äôt the problem. Not being accepted is. ‚Äì Kati Morton",
        "I‚Äôve never fit the mold. So I stopped trying. I make my own form. ‚Äì Rick Green",
        "What‚Äôs seen as inconsistency might actually be range. ‚Äì Dr. Russell Barkley",
        "I work best when I‚Äôm allowed to work weird. ‚Äì Jessica McCabe",
        "It takes a wild mind to dream wild dreams. ‚Äì Samantha Craft",
        "The world wasn‚Äôt made for people like us. But we‚Äôre the ones who remake it. ‚Äì Temple Grandin",
        "Not all those who wander are lost. Some just have ADHD. ‚Äì Unknown",
        "Just because I move fast doesn‚Äôt mean I‚Äôm out of control. ‚Äì Rick Green",
        "Normal is a setting on a washing machine. That‚Äôs it. ‚Äì Patsy Clairmont",
        "Failure is just another way to learn how to do something right. ‚Äì Marian W. Edelman"
        ];

    const nicknames = [
        "min Flammedanser",
        "min Himmeldanser",
        "min Blomsterskat",
        "min M√•nedronning",
        "min Valkyrie",
        "mit Ulvehjerte",
        "min Engdanser",
        "min Stjernesanger",
        "min Aurora",
        "min Lysling",
        "min K√¶rlighedsblomst",
        "min Muse",
        "mit Hjertelys",
        "min Strandperle",
        "min Skydanser",
        "min Dr√∏mmeelsker",
        "min Himmelsj√¶l",
        "min Solbregne",
        "mit Solb√¶r",
        "min Sj√¶lesang",
        //---
        "min Dugrose",
        "min Belle",
        "mit Opalhjerte",
        "min Solengel",
        "min Regnbuedanser",
        "min M√•neblomst",
        "min Solstr√•le",
        "min M√•nedr√•be",
        "mit Stormkys",
        "min Rose",
        "min Lilje",
        "min Fjersj√¶l",
        "min Eventyrblomst",
        "min Sommerdrage",
        "min Solkilde",
        "min Hjerteflamme",
        "min Elverdronning",
        "min Ledestjerne",
        "min Morgensol",
        "min Vintergl√∏d",
        //---
        "min Lysrose",
        "min T√•gedanser",
        "min Ravsj√¶l",
        "min Snestjerne",
        "min Vindrose",
        "min S√∏lvflamme",
        "min Hjertedr√∏m",
        "min Sangfugl",
        //---
        "mit Eneb√¶r",
        "min Himmelrose",
        "min Glimmerfugl",
        "min Solbrise",
        "min Lysengel",
        "min Birkeblomst",
        "min Hjertehvisker",
        "min Fabelrose",
        "mit Himmelkys",
        "min M√•nefugl",
        "min Ildblomst",
        //---
        "min Svane",
        "min Fyrfryd",
        "min Sommerfugl",
        "mit Hjerte",
        "min Morgendr√•be",
        "min Fredslilje",
        "min Solsanger",
        "min M√•nesten",
        "mit Solh√•b",
        "min Frostengel",
        "min √Übleblomst",
        "min Hjerteranke",
        "min Natrose",
        "mit Solhjerte",
        "mit Stjernelys",
        "min B√∏lgelilje",
        "mit Vinterhjerte",
        "min Hjertefryd",
        "min Skovperle",
        "min Morgensky",
        "min Snehvide",
        "min Natsanger",
        "min K√¶rlighedsfugl",
        "mit Vingekys",
        "min Stjernedr√•be",
        "min Morgenrose",
        "min Elverlilje",
        "min Dr√∏m",
        "min Aftensol",
        "mit M√•nehjerte",
        "min V√•rperle",
        "min Stjernedanser",
        "mit Dugkys",
        "min Krystalrose",
        "min Dr√∏mmelilje",
        "min Blomsterhvisker",
        "mit Nordlys",
        "min Vinterengel",
        "min Ravrose",
        "min Elversj√¶l",
        "mit Stjernesk√¶r",
        "min Midnatssol",
        "min M√•negnist",
        "min Perledr√∏m",
        "min Himmelhvisker",
        "mit Snehjerte",
        "mit Solkys",
        "min Dugblomst",
        "min Hjerterose",
        "min Livskilde",
        "min M√•nestr√•le",
        "min Solspire",
        "min H√•bslilje",
        "min Hjertegnist",
        "min Ravblomst",
        "min Stjernehvisker",
        "min Frostlilje",
        "min Himmelblomst",
        "min Morgensang",
        "mit Dr√∏mmehjerte",
        "min Hjertekys",
        "min Natblomst",
        "min Lysflamme",
        "min M√•nerose",
        "min H√•bsfugl",
        "min Regndanser",
        //---
        "min Skat",
        "min Kaos-fe",
        "min Jagtgudinde",
        "min V√∏lve",
        "min Dragedronning"
    ];

    const nicknameEmojis = [
      "üî•", "üíÉüèª", "üå∏", "üåï", "üõ°Ô∏è", "üê∫", "ü™Ω", "üé∂", "üåå", "‚ú®", "üå∫", "üé®", "üí°", "üèñÔ∏è", "üíÉ", "üíû", "‚òÄÔ∏è", "üåø", "ü´ê", "üéµ",
      "üåπ", "üå∑", "üíú", "üëº", "üåà", "üåô", "üåû", "üíß", "üíã", "üåπ", "üåº", "ü™∂", "üåº", "üêâ", "üê¶‚Äçüî•", "‚ù§Ô∏è‚Äçüî•", "üëë", "‚≠ê", "üåÖ", "‚ùÑÔ∏è",
      "üåª", "ü©µ", "üß°", "‚ùÑÔ∏è", "üçÉ", "üî•", "üíó", "üê¶",
      "üåø", "üí´", "ü¶ú", "üòé", "üïØÔ∏è", "üå∏", "üíû", "‚ù§Ô∏è", "üíã", "üïäÔ∏è", "üî•",
      "ü¶¢", "üß°", "ü¶ã", "‚ù§Ô∏è", "üíß", "üå∫", "üé§", "ü™®", "üåà", "‚ùÑÔ∏è", "üçé", "üåø", "üñ§", "‚ù§Ô∏è", "‚ú®", "üíõ", "üíô", "ü•∞", "üå≤", "üå§Ô∏è", "‚ú®",
      "üåô", "üïäÔ∏è", "üíã", "üåü", "üåπ", "üßù‚Äç‚ôÄÔ∏è", "üí≠", "üåá", "ü©∑", "‚ö™", "üåü", "üíì", "üíé", "üå∫", "üßö", "üå†", "‚ùÑÔ∏è", "üåπ", "üßù", "‚ú®", "üåû", "üåë",
      "ü§ç","üåå","‚ùÑÔ∏è","üíã","üíß","üåπ","üå±","üåô","‚òÄÔ∏è","üïØÔ∏è", "üß°", "üåº", "üí´", "‚ùÑÔ∏è", "üå∏", "üéµ", "üíñ", "üíã", "üå∫", "üî•", "üåπ", "üïäÔ∏è", "üåßÔ∏è",
      "üçÄ", "ü¶Ñ", "üê∫", "üïØÔ∏è", "üëë"
    ];

    const quoteEmojis = [
      "üß≤", "üåà", "üéÅ", "‚è≥", "üéØ", "ü™û", "‚òÄÔ∏è", "üëÇ", "üíì", "üëÄ",
      "üéµ", "üìù", "ü§ç", "‚ú®", "üöß", "üåÄ", "üéì", "üìñ", "üé®", "üí™",
      "‚öñÔ∏è", "üóìÔ∏è", "‚ôæÔ∏è", "üßò", "‚òÆÔ∏è", "üî•", "üé¢", "‚ù§Ô∏è", "üíû", "üåÄ",
      "üéª", "üôÉ", "üèÅ", "üç´", "ü§ù", "üß†", "üåç", "üß≠", "üåø", "üß†",
      "üí™", "üîÑ", "‚ö°Ô∏è", "üéØ", "üí™", "üî®", "üèÜ", "üß±", "‚òÄÔ∏è", "‚õÖ",
      "üëä", "üéØ", "üåà", "üõ£Ô∏è", "‚è≥", "üéÇ", "üõ†Ô∏è", "‚è∞", "ü™ô", "üèÅ",
      "üéØ", "ü¶Å", "ü§´", "üß†", "üí™", "üî•", "üìâ", "üèÉ", "üîì", "‚úä",
      "üåª", "üßó", "üßä", "üèÄ", "üßÆ", "üåà", "üßò", "üß≠", "ü•ä", "‚öñÔ∏è",
      "üêò", "üîá", "üå™Ô∏è", "‚öñÔ∏è", "üîì", "üß†", "üë£", "üíö", "üå§Ô∏è", "‚úîÔ∏è",
      "üèπ", "ü´Ä", "üåÖ", "üåô", "üå≤", "üçÑ", "üèûÔ∏è", "üåå", "üë£", "üåª",
      "üå≥", "üåø", "üåç", "üå≤", "üåà", "üïäÔ∏è", "üåÄ", "üåÖ", "üçÉ", "üå∏",
      "üåº", "üåª", "üíó", "üìö", "üß†", "üåÄ", "üå™Ô∏è", "üåü", "üåå", "‚ö°Ô∏è",
      "üåã", "üå∫", "üõ§Ô∏è", "üí´", "üß≠", "üéá", "üé®", "üé®", "üéØ", "üß†",
      "üßó", "üì∂", "üß†", "üíé", "üíì", "üèûÔ∏è", "üéØ", "üåÑ", "üìç", "üéØ",
      "üåü", "üé≠", "üîë", "üçÄ", "üåû", "üå±", "üöß", "üì¶", "üèÅ", "üêõ",
      "üéØ", "üêò", "üé≠", "üåø", "üó£Ô∏è", "‚õµ", "üß†", "üéØ", "‚è≥", "ü™∑",
      "ü§ó", "üå±", "üåç", "üå≤", "üß†", "üß†", "üéØ", "üß†", "üß≠", "üôå",
      "‚ú®", "üéØ", "‚ö°", "üß≠", "üåä", "üå±", "ü™û", "üí´", "üõ§Ô∏è", "üåª",
      "üåç", "üó∫Ô∏è", "üåÄ", "üå†", "üéâ"
    ];

    const year = new Date().getFullYear();

    const QUOTE_KEY = "quoteUsage-" + year;
    const NICKNAME_KEY = "nicknameUsage-" + year;
    const DISPLAY_STATE_KEY = "displayState";

  const TWENTY_HOURS_MS = 20 * 60 * 60 * 1000;

  function getWeightedIndex(array, keyPrefix, maxUses = 3) {
    const usageKey = `${keyPrefix}-${year}`;
    const usageMap = JSON.parse(localStorage.getItem(usageKey)) || {};

    const weights = array.map((_, i) => {
      const count = usageMap[i] || 0;
      return count >= maxUses ? 0 : 1 / (1 + count);
    });

    const total = weights.reduce((sum, w) => sum + w, 0);
    const cumulative = [];
    let running = 0;
    for (let i = 0; i < weights.length; i++) {
      running += weights[i] / total;
      cumulative.push(running);
    }

    const rand = Math.random();
    const index = cumulative.findIndex(c => rand <= c);

    usageMap[index] = (usageMap[index] || 0) + 1;
    localStorage.setItem(usageKey, JSON.stringify(usageMap));

    return index;
  }

  function showQuoteAndNickname(forceRefresh = false) {
    const now = Date.now();
    const stored = JSON.parse(localStorage.getItem(DISPLAY_STATE_KEY));

    if (
      stored &&
      !forceRefresh &&
      stored.timestamp &&
      now - stored.timestamp < TWENTY_HOURS_MS
    ) {
      // Show saved quote & nickname
      renderDisplay(stored.nicknameIndex, stored.quoteIndex);
    } else {
      // Generate new
      const quoteIndex = getWeightedIndex(quotes, "quoteUsage");
      const nicknameIndex = getWeightedIndex(nicknames, "nicknameUsage");

      const newState = {
        quoteIndex,
        nicknameIndex,
        timestamp: now,
      };

      localStorage.setItem(DISPLAY_STATE_KEY, JSON.stringify(newState));
      renderDisplay(nicknameIndex, quoteIndex);
    }
  }

  function renderDisplay(nicknameIndex, quoteIndex) {
    const nickname = nicknames[nicknameIndex];
    const quote = quotes[quoteIndex];
    const nicknameEmoji = nicknameEmojis[nicknameIndex] || "üíñ";
    const quoteEmoji = quoteEmojis[quoteIndex] || "‚ú®";
    const combinedEmoji = `${nicknameEmoji} ${quoteEmoji}`;

    document.getElementById("quote").textContent = quote;
    document.getElementById("nickname").textContent = "Til " + nickname;
    document.getElementById("emoji-of-the-day").textContent = `${combinedEmoji}` + " üåü";
  }

  function resetCounter() {
    localStorage.removeItem(QUOTE_KEY);
    localStorage.removeItem(NICKNAME_KEY);
    localStorage.removeItem(DISPLAY_STATE_KEY);
    location.reload();
  }
    
  showQuoteAndNickname();
  </script>

    <script>
      // === Daily-at-08:00 logic (slot-based) ===
      const CUTOVER_HOUR = 8, CUTOVER_MINUTE = 0;
      const REFRESH_DISPLAY_STATE_KEY = "displayState-v2"; // bump key to ignore old 20h cache
    
      function getCutoverSlot(d = new Date()) {
        // Returns YYYY-MM-DD for the "day that started at 08:00 local"
        const now = new Date(d);
        const cut = new Date(now);
        cut.setHours(CUTOVER_HOUR, CUTOVER_MINUTE, 0, 0);
        const slotDate = (now < cut)
          ? new Date(now.getFullYear(), now.getMonth(), now.getDate() - 1)
          : new Date(now.getFullYear(), now.getMonth(), now.getDate());
        return slotDate.toISOString().slice(0, 10); // "YYYY-MM-DD"
      }
    
      function msUntilNextCutover(d = new Date()) {
        const next = new Date(d);
        next.setHours(CUTOVER_HOUR, CUTOVER_MINUTE, 0, 0);
        if (next <= d) next.setDate(next.getDate() + 1);
        return next - d;
      }
    
      async function ensureDailyDisplay(forceNew = false) {
        const slot = getCutoverSlot();
        const saved = JSON.parse(localStorage.getItem(REFRESH_DISPLAY_STATE_KEY) || 'null');
    
        if (!saved || saved.slot !== slot || forceNew) {
          // pick fresh items for today's slot
          const quoteIndex = getWeightedIndex(quotes, "quoteUsage");
          const nicknameIndex = getWeightedIndex(nicknames, "nicknameUsage");
          const state = { slot, quoteIndex, nicknameIndex, ts: Date.now() };
          localStorage.setItem(REFRESH_DISPLAY_STATE_KEY, JSON.stringify(state));
          renderDisplay(nicknameIndex, quoteIndex);
        } else {
          renderDisplay(saved.nicknameIndex, saved.quoteIndex);
        }
    
        // If the app stays open, refresh at the next cutover
        clearTimeout(window.__cutoverTimer);
        window.__cutoverTimer = setTimeout(() => ensureDailyDisplay(true), msUntilNextCutover() + 1000);
      }
    
      // Run on load
      ensureDailyDisplay();
    
      // Also run whenever the app returns to foreground
      window.addEventListener('visibilitychange', () => {
        if (!document.hidden) ensureDailyDisplay();
      }, { passive: true });
      window.addEventListener('focus', () => ensureDailyDisplay(), { passive: true });
      window.addEventListener('pageshow', () => ensureDailyDisplay(), { passive: true });
    
      // Optional: update your reset to clear the new key too
      function resetCounter() {
        localStorage.removeItem("quoteUsage-" + new Date().getFullYear());
        localStorage.removeItem("nicknameUsage-" + new Date().getFullYear());
        localStorage.removeItem(REFRESH_DISPLAY_STATE_KEY);
        location.reload();
      }
  </script>
</body>
</html>
